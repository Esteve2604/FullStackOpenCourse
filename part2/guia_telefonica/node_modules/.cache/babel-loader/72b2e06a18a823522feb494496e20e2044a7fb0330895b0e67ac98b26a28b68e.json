{"ast":null,"code":"import personsService from'../services/persons';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PersonForm=function PersonForm(_ref){var newName=_ref.newName,setNewName=_ref.setNewName,newPhone=_ref.newPhone,setNewPhone=_ref.setNewPhone,persons=_ref.persons,setPersons=_ref.setPersons,setSuccessMessage=_ref.setSuccessMessage,setErrorMessage=_ref.setErrorMessage;var handleNameChange=function handleNameChange(event){setNewName(event.target.value);};var handlePhoneChange=function handlePhoneChange(event){setNewPhone(event.target.value);};var succeded=function succeded(person){setSuccessMessage(person.name);setTimeout(function(){return setSuccessMessage(null);},5000);};var error=function error(name){setErrorMessage(name);setTimeout(function(){return setErrorMessage(null);},5000);};var addPerson=function addPerson(event){event.preventDefault();if(AddedPerson()){var person={name:newName,number:newPhone};personsService.add(person).then(function(person){return setPersons(persons.concat(person));});succeded(person);}else{if(window.confirm(\"\".concat(newName,\" is already added to phonebook, do you want to update the phone number?\")))personsService.actualizar(persons,newName,newPhone).then(function(returnedper){succeded(returnedper);return setPersons(persons.map(function(persona){return returnedper.id===persona.id?returnedper:persona;}));}).catch(function(errores){return error(newName);});}};var AddedPerson=function AddedPerson(){var nom=persons.filter(function(nombre){return newName.localeCompare(nombre.name)===0;});return nom.length===0;};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:addPerson,children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Name: \",/*#__PURE__*/_jsx(\"input\",{value:newName,onChange:handleNameChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Number: \",/*#__PURE__*/_jsx(\"input\",{value:newPhone,onChange:handlePhoneChange})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"add\"})})]});};export default PersonForm;","map":{"version":3,"names":["personsService","PersonForm","newName","setNewName","newPhone","setNewPhone","persons","setPersons","setSuccessMessage","setErrorMessage","handleNameChange","event","target","value","handlePhoneChange","succeded","person","name","setTimeout","error","addPerson","preventDefault","AddedPerson","number","add","then","concat","window","confirm","actualizar","returnedper","map","persona","id","catch","errores","nom","filter","nombre","localeCompare","length"],"sources":["C:/carrera/FullStackOpenCourse/part2/guia_telefonica/src/components/PersonForm.js"],"sourcesContent":["import personsService from '../services/persons'\r\nconst PersonForm = ({ newName, setNewName, newPhone,\r\n    setNewPhone, persons, setPersons, setSuccessMessage, setErrorMessage }) => {\r\n    const handleNameChange = (event) => {\r\n        setNewName(event.target.value)\r\n    }\r\n    const handlePhoneChange = (event) => {\r\n        setNewPhone(event.target.value)\r\n    }\r\n    const succeded = (person) => {\r\n        setSuccessMessage(person.name)\r\n        setTimeout(() => setSuccessMessage(null), 5000)\r\n    }\r\n    const error = (name) => {\r\n        setErrorMessage(name)\r\n        setTimeout(() => setErrorMessage(null), 5000)\r\n    }\r\n    const addPerson = (event) => {\r\n        event.preventDefault()\r\n        if (AddedPerson()) {\r\n            const person = { name: newName, number: newPhone }\r\n            personsService.add(person).then(person => setPersons(persons.concat(person)))\r\n            succeded(person)\r\n        } else {\r\n            if (window.confirm(`${newName} is already added to phonebook, do you want to update the phone number?`))\r\n                personsService.actualizar(persons, newName, newPhone).then(\r\n                    returnedper => {\r\n                        succeded(returnedper)\r\n                        return setPersons(persons.map(persona => returnedper.id === persona.id ? returnedper : persona))\r\n                    }).catch(errores=> error(newName)\r\n                    )\r\n\r\n        }\r\n    }\r\n    const AddedPerson = () => {\r\n        const nom = persons.filter(nombre => newName.localeCompare(nombre.name) === 0)\r\n        return nom.length === 0\r\n    }\r\n    return (\r\n        <form onSubmit={addPerson}>\r\n            <div>\r\n                Name: <input value={newName} onChange={handleNameChange} />\r\n            </div>\r\n            <div>\r\n                Number: <input value={newPhone} onChange={handlePhoneChange} />\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\nexport default PersonForm"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}